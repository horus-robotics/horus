---
title: CLI Reference
description: Complete guide to all HORUS commands
order: 7
---

# CLI Reference

The `horus` command gives you everything you need to build, run, and manage your applications. This page covers all 8 commands.

## Quick Reference

```bash
horus new <name>           # Create a new project
horus run [file]           # Build and run your app
horus dashboard [port]     # Monitor your system
horus pkg <command>        # Manage packages (install, publish, etc.)
horus env <command>        # Save/restore environments
horus auth <command>       # Login to registry
horus version              # Show version information
```

---

## `horus new` - Create Projects

**What it does**: Creates a new HORUS project with all the boilerplate set up for you.

**Why it's useful**: No need to remember dependencies or configuration - just pick a language and start coding.

### Basic Usage

```bash
# Interactive mode (asks you questions)
horus new my_project

# Rust with helpful macros (recommended!)
horus new my_project --macro

# Python project
horus new my_project --python

# C project ( under development)
horus new my_project --c
```

**Note**: C bindings are in alpha. Use Rust or Python for production.

### All Options

```bash
horus new <NAME> [OPTIONS]

Options:
  -m, --macro              Rust with node! macro (less boilerplate)
  -r, --rust               Plain Rust project
  -p, --python             Python project
  -c, --c                  C project
  -o, --output <PATH>      Where to create it (default: current directory)
```

### Examples

**Start with Rust + macros** (easiest):
```bash
horus new temperature_monitor --macro
cd temperature_monitor
horus run
```

**Python for prototyping**:
```bash
horus new sensor_test --python
cd sensor_test
python main.py
```

**Put it somewhere specific**:
```bash
horus new robot_controller --output ~/projects/robots
```

---

## `horus run` - Build and Run

**What it does**: Compiles your code and runs it. Handles all the build tools for you.

**Why it's useful**: One command works for Rust, Python, and C. For Rust, it auto-generates `Cargo.toml` from `horus.yaml` and uses Cargo for compilation. For Python and C, it handles the appropriate tooling.

### Basic Usage

```bash
# Run current directory (finds main.rs, main.py, or main.c)
horus run

# Run specific file
horus run src/controller.rs

# Run optimized (100x faster!)
horus run --release
```

### All Options

```bash
horus run [FILE] [OPTIONS] [-- ARGS]

Options:
  -r, --release            Optimize for speed (use for real testing!)
  -b, --build-only         Just compile, don't run
  -c, --clean              Remove old build files first
  -R, --remote <ROBOT>     Run on a remote robot
  -- <ARGS>                Arguments for your program
```

### Why --release Matters

**Debug mode** (default): Fast to compile, slow to run
- Good for: Trying things quickly
- Speed: Messages take ~5-50μs

**Release mode** (`--release`): Slow to compile, fast to run
- Good for: Real testing, benchmarks, production
- Speed: Messages take ~312ns-1.31μs (100x faster!)

**Always use `--release` when measuring performance!**

### Examples

**Daily development**:
```bash
horus run
# Fast iteration, slower execution
```

**Testing performance**:
```bash
horus run --release
# See real speed
```

**Build for CI without running**:
```bash
horus run --build-only --release
```

**Fresh build** (when things act weird):
```bash
horus run --clean --release
```

**Run on your robot**:
```bash
horus run --remote 192.168.1.100
# Builds here, runs there
```

**Pass arguments to your program**:
```bash
horus run -- --config robot.yaml --verbose
```

### Important: Single-File Projects Only

`horus run` is designed for **single-file HORUS projects** (main.rs, main.py, or main.c). It creates a temporary workspace in `.horus/` and automatically handles dependencies.

**What works with `horus run`:**
- Single main.rs with all nodes defined in one file
- Simple Python scripts (main.py)
- Single C files (main.c)

**What doesn't work:**
- Multi-crate Cargo workspaces
- Projects with multiple Cargo.toml files
- Complex module structures with separate crate directories

**For multi-crate projects**, use `cargo` directly:
```bash
cd your_multi_crate_project
cargo build --release
cargo run --release
```

**Example of a proper single-file structure:**
```rust
// main.rs - everything in one file
use horus::prelude::*;

struct SensorNode { /* ... */ }
impl Node for SensorNode { /* ... */ }

struct ControlNode { /* ... */ }
impl Node for ControlNode { /* ... */ }

fn main() -> Result<()> {
    let mut scheduler = Scheduler::new();
    scheduler.add(Box::new(SensorNode::new()?), 0, Some(true));
    scheduler.add(Box::new(ControlNode::new()?), 1, Some(true));
    scheduler.run()
}
```

### Concurrent Multi-Process Execution

HORUS supports running multiple node files concurrently as separate processes using **glob patterns**. This is ideal for distributed robotics systems where nodes need to run independently.

**Basic Usage:**
```bash
horus run "nodes/*.py"          # Run all Python nodes concurrently
horus run "src/*.rs"            # Run all Rust nodes concurrently
horus run "nodes/*.c"           # Run all C nodes concurrently
```

**How it works:**
1. **Phase 1 (Build)**: Builds all files sequentially, respecting Cargo's file lock
2. **Phase 2 (Execute)**: Spawns all processes concurrently with their own schedulers
3. Each process communicates via HORUS shared memory IPC

**Features:**
- ✅ **Color-coded output**: Each node is prefixed with `[node_name]` in a unique color
- ✅ **Graceful shutdown**: Ctrl+C cleanly terminates all processes
- ✅ **Multi-language**: Works with Rust, Python, and C
- ✅ **Automatic detection**: No flags needed, just use glob patterns

**Example output:**
```bash
$ horus run "nodes/*.py"
 Executing 3 files concurrently:
  1. nodes/sensor.py (python)
  2. nodes/controller.py (python)
  3. nodes/logger.py (python)

 Phase 1: Building all files...
 Phase 2: Starting all processes...
  ✓ Started [sensor]
  ✓ Started [controller]
  ✓ Started [logger]

 All processes running. Press Ctrl+C to stop.

[sensor] Sensor reading: 25.3°C
[controller] Motor speed: 45%
[logger] System operational
[sensor] Sensor reading: 26.1°C
[controller] Motor speed: 50%
[logger] System operational
```

**When to use concurrent execution:**
- Multi-node systems where each node is in a separate file
- Distributed control architectures (similar to ROS nodes)
- Testing multiple nodes simultaneously
- Microservices-style robotics architectures

**When to use single-process execution:**
- All nodes in one file (typical for simple projects)
- Projects requiring deterministic scheduling across all nodes
- Maximum performance with minimal overhead

**Important:** Each process runs its own scheduler. Nodes communicate through HORUS shared memory topics (`/dev/shm/horus/`), not direct function calls.

---

## `horus dashboard` - Monitor Everything

**What it does**: Opens a visual dashboard showing all your running nodes, messages, and performance.

**Why it's useful**: Debug problems visually. See message flow in real-time. Monitor performance.

### Basic Usage

```bash
# Web dashboard (opens in browser)
horus dashboard

# Different port
horus dashboard 8080

# Text-based (for SSH)
horus dashboard --tui
```

### What You See

The dashboard shows:
- **All running nodes** - Names, status, tick rates
- **Message flow** - What's talking to what
- **Performance** - CPU, memory, latency per node
- **Topics** - All active communication channels
- **Graph view** - Visual network of your system

### Examples

**Start monitoring** (in a second terminal):
```bash
# Terminal 1: Run your app
horus run --release

# Terminal 2: Watch it
horus dashboard
```

**Access from your phone**:
```bash
horus dashboard
# Visit http://your-computer-ip:3000 from phone
```

**Monitor over SSH**:
```bash
ssh robot@192.168.1.100
horus dashboard --tui
```

See [Dashboard Guide](/dashboard) for detailed features.

---

## `horus pkg` - Package Management

**What it does**: Install and manage reusable components.

**Why it's useful**: Don't reinvent the wheel. Use components others have built and tested.

### Commands

```bash
# Install a package
horus pkg install <package>

# Remove a package
horus pkg remove <package>

# List packages
horus pkg list

# Publish current package to registry
horus pkg publish

# Unpublish a package from registry
horus pkg unpublish <package> <version>
```

### Examples

**Install a package**:
```bash
horus pkg install pid-controller
```

**Install specific version**:
```bash
horus pkg install pid-controller -v 1.2.0
```

**Install globally** (share across projects):
```bash
horus pkg install common-utils --global
```

**See what's installed**:
```bash
horus pkg list
```

**Search for packages**:
```bash
horus pkg list sensor
```

**Remove a package**:
```bash
horus pkg remove pid-controller
```

**Publish your package to registry**:
```bash
# First login
horus auth login

# Then publish from your project directory
horus pkg publish
```

**Unpublish from registry** (irreversible!):
```bash
horus pkg unpublish my-package 1.0.0
```

---

## `horus env` - Environment Management

**What it does**: Save and restore your exact setup (all package versions).

**Why it's useful**: Share your setup with teammates. Deploy the same version to production. Time-travel to old configurations.

### Commands

```bash
# Save current environment
horus env freeze

# Load saved environment
horus env restore <file>
```

### Examples

**Save your setup**:
```bash
horus env freeze
# Creates horus-freeze.yaml
```

**Load teammate's setup**:
```bash
horus env restore teammate-setup.yaml
```

**Deploy exact production environment**:
```bash
# On production machine
horus env restore production.yaml
```

---

## `horus auth` - Login to Registry

**What it does**: Authenticate so you can publish packages.

**Why it's useful**: Secure access to the package registry.

### Commands

```bash
# Login with GitHub
horus auth login

# Generate API key (for CI/CD)
horus auth generate-key

# Check who you are
horus auth whoami

# Logout
horus auth logout
```

### Examples

**First time setup**:
```bash
horus auth login
# Opens browser for GitHub login
```

**Check you're logged in**:
```bash
horus auth whoami
```

**Generate API key for CI/CD**:
```bash
horus auth generate-key --name github-actions --environment ci-cd
# Save the generated key in your CI secrets
```

**Logout**:
```bash
horus auth logout
```

---

## `horus version` - Show Version Information

**What it does**: Display version information about your HORUS installation.

**Why it's useful**: Check what version you're running, verify installation, and get system information.

### Usage

```bash
horus version
```

### Example Output

```
HORUS - Hybrid Optimized Robotics Unified System
Version: 0.1.0
Build: release
Commit: abc123def456
Platform: linux-x86_64
Rust: 1.70.0
```

**Common uses**:
- Verify HORUS is installed correctly
- Check which version you're running
- Report version when filing bugs
- Confirm you have the latest version

---

## Common Workflows

### First Time Using HORUS

```bash
# Create a project
horus new my_first_app --macro
cd my_first_app

# Run it
horus run --release

# Monitor it (new terminal)
horus dashboard
```

### Daily Development

```bash
# Make changes to code
vim src/main.rs

# Test quickly
horus run

# Test for real
horus run --release
```

### Deploy to Production

```bash
# Clean build
horus run --clean --release

# Save the environment
horus env freeze --output production.yaml

# Deploy to robot
horus run --remote production-robot --release
```

### Share Your Work

```bash
# Login once
horus auth login

# Publish
horus pkg publish

# Others can now:
horus pkg install your-package-name
```

---

## Troubleshooting

### "command not found: horus"

Add cargo to your PATH:

```bash
export PATH="$HOME/.cargo/bin:$PATH"
echo 'export PATH="$HOME/.cargo/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
```

### "Port already in use"

```bash
# Use different port
horus dashboard 3001

# Or kill the old process
lsof -ti:3000 | xargs kill -9
```

### Build is slow

First build is always slow (5-10 min). After that it's fast (seconds).

Use `--release` only when you need speed, not during development.

### "Failed to create Hub"

Topic name conflict. Try a unique name or clean up:

```bash
rm -rf /dev/shm/horus/*
```

---

## Environment Variables

Optional configuration:

```bash
# Custom registry (for companies)
export HORUS_REGISTRY_URL=https://your-company-registry.com

# Debug mode (see what's happening)
export RUST_LOG=debug
horus run

# CI/CD authentication
export HORUS_API_KEY=your-key-here
```

---

## Utility Scripts

Beyond the `horus` CLI, the repository includes helpful scripts:

```bash
./verify.sh              # Check installation health
./update.sh              # Smart update script (auto git pull)
./recovery_install.sh    # Fix broken installations
```

See **[Troubleshooting & Maintenance](/troubleshooting)** for complete details.

---

## Next Steps

Now that you know the commands:

1. **[Quick Start](/getting-started/quick-start)** - Build your first app
2. **[node! Macro](/node-macro)** - Write less code
3. **[Dashboard Guide](/dashboard)** - Master monitoring
4. **[Examples](/examples)** - See real applications

**Having issues?** Check the **[Troubleshooting Guide](/troubleshooting)** for solutions to common problems.
