---
title: CameraNode
description: Vision camera for image capture and computer vision
---

# CameraNode

Vision camera node for image capture supporting USB cameras, Raspberry Pi Camera Module, and network cameras. Provides image streaming for computer vision, object detection, and visual navigation.

## Source Code

- [CameraNode Implementation](https://github.com/softmata/horus/tree/main/horus_library/nodes/camera)
- [Vision Messages](https://github.com/softmata/horus/blob/main/horus_library/messages/vision.rs)

## Features

- USB cameras (V4L2)
- Raspberry Pi Camera Module
- IP cameras (RTSP/HTTP)
- Configurable resolution and framerate
- JPEG/PNG image output
- OpenCV integration
- Hardware fallback to simulation

## Quick Start

```rust
use horus_library::prelude::*;

fn main() -> Result<()> {
    let mut scheduler = Scheduler::new();

    let mut camera = CameraNode::new()?;
    camera.set_device_id(0);     // Camera index 0
    camera.set_resolution(640, 480);
    camera.set_fps(30.0);

    scheduler.add(Box::new(camera), 1, Some(true));
    scheduler.run()?;
    Ok(())
}
```

## Configuration

```rust
// Set camera device ID (0 for default camera)
camera.set_device_id(0);

// Set image resolution
camera.set_resolution(640, 480);

// Set capture framerate
camera.set_fps(30.0);

// Set image encoding format
camera.set_encoding(ImageEncoding::Bgr8);

// Enable/disable image compression
camera.set_compression(true, 90);  // enabled, quality (0-100)
```

## Usage

The CameraNode publishes to the following topics (configurable via `new_with_topic`):
- Publishes to `"camera/image"` - captured frames (Image)
- Publishes to `"camera/camera_info"` - camera calibration info (CameraInfo)

```rust
let hub = Hub::<Image>::new("camera/image")?;

if let Some(frame) = hub.recv(&mut None) {
    println!("Frame: {}x{}, {} bytes",
        frame.width, frame.height, frame.data.len());
    // Process image...
}

// Get actual FPS
let fps = camera.get_actual_fps();

// Get total frames captured
let count = camera.get_frame_count();
```

## See Also

- [DepthCameraNode](./depth-camera) - 3D depth cameras
- [ImageProcessorNode](./image-processor) - Image processing
